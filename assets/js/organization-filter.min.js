$(function(){function t(t,n){if(!t)throw console.error(n,arguments),"AssertionError"}function n(t){var a=[];return t.find("> ul > .organization").each(function(t,r){r=$(r);var e=r.find("> .organization-row > a:first");a.push({div:r,link:e,rawtext:e.text(),searchtext:e.text().toLowerCase(),children:n(r)})}),a}function a(t){var n="";if(t=t.toLowerCase(),0==t.length){var a=$(".organization");return g=a.length,a.removeClass("match"),a.removeClass("childMatch"),i.addClass("empty-search"),l.text(g),n=1===g?filterConfig.labels.organization_singular:filterConfig.labels.organization_plural,void s.text(n)}i.removeClass("empty-search"),g=0;for(var e=0;e<h.length;e++)r(t,h[e]);l.text(g),n=1===g?filterConfig.labels.organization_singular:filterConfig.labels.organization_plural,s.text(n)}function r(t,n){for(var a=!1,e=0;e<n.children.length;e++)a|=r(t,n.children[e]);var i=n.searchtext.indexOf(t);if(-1!=i){g+=1;var o=n.rawtext.substring(0,i),l=n.rawtext.substring(i,i+t.length),s=n.rawtext.substring(i+t.length);return n.div.addClass("match"),n.link.html(o+'<span class="highlight">'+l+"</span>"+s),!0}return n.div.removeClass("match"),n.link.html(n.rawtext),a?n.div.addClass("childmatch"):n.div.removeClass("childmatch"),a}function e(t){var n=o.val();n!=c&&(c=n,o.addClass("loading"),window.clearTimeout(window.organization_filter_timeout),window.organization_filter_timeout=window.setTimeout(function(){o.removeClass("loading"),a(n)},200))}var i=$(".organization-hierarchy"),o=$("input#organization-search"),l=$(".result-count"),s=$(".result-count-footer"),h=n(i);t(i.length),t(o.length);var g=-1,c="";o.on("keydown",e),o.on("keyup",e),o.on("keypress",e),o.change(e),a(o.val())});