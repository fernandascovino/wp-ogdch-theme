$(function(){function t(t,n){if(!t)throw console.error(n,arguments),"AssertionError"}function n(t){var a=[];return t.find("> ul > .organization").each(function(t,r){r=$(r);var i=r.find("> .organization-row > a:first");a.push({div:r,link:i,rawtext:i.text(),searchtext:i.text().toLowerCase(),children:n(r)})}),a}function a(t){var n="";if(t=t.toLowerCase(),0==t.length){var a=$(".organization");return c=a.length,a.removeClass("match"),a.removeClass("childMatch"),e.addClass("empty-search"),l.text(c),n=1===c?filterConfig.labels.organization_singular:filterConfig.labels.organization_plural,void s.text(n)}e.removeClass("empty-search"),c=0;for(var i=0;i<h.length;i++)r(t,h[i]);l.text(c),n=1===c?filterConfig.labels.organization_singular:filterConfig.labels.organization_plural,s.text(n)}function r(t,n){for(var a=!1,i=0;i<n.children.length;i++)a|=r(t,n.children[i]);var e=n.searchtext.indexOf(t);if(e!=-1){c+=1;var o=n.rawtext.substring(0,e),l=n.rawtext.substring(e,e+t.length),s=n.rawtext.substring(e+t.length);return n.div.addClass("match"),n.link.html(o+'<span class="highlight">'+l+"</span>"+s),!0}return n.div.removeClass("match"),n.link.html(n.rawtext),a?n.div.addClass("childmatch"):n.div.removeClass("childmatch"),a}function i(t){var n=o.val();n!=g&&(g=n,o.addClass("loading"),window.clearTimeout(window.organization_filter_timeout),window.organization_filter_timeout=window.setTimeout(function(){o.removeClass("loading"),a(n)},200))}var e=$(".organization-hierarchy"),o=$("input#organization-search"),l=$(".result-count"),s=$(".result-count-footer"),h=n(e);t(e.length),t(o.length);var c=-1,g="";o.on("keydown",i),o.on("keyup",i),o.on("keypress",i),o.change(i),a(o.val())});